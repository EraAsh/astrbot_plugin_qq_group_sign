# QQ群打卡插件

一个功能强大的QQ群打卡插件，支持自动定时打卡、白名单模式、管理员通知等功能。

## 🌟 主要功能

- 🕒 **自动定时打卡**：支持自定义时分秒的打卡时间
- 📝 **白名单模式**：可以指定特定群聊进行打卡
- 🌐 **全群模式**：默认打卡所有群聊
- 📊 **统计功能**：记录打卡成功/失败次数
- 🔔 **管理员通知**：打卡完成后通知管理员或管理群
- 🎯 **手动打卡**：支持在当前群聊或全群执行打卡
- 📋 **指令菜单**：提供完整的指令列表和使用说明
- ⚙️ **灵活配置**：支持多种配置选项

## 📋 安装说明

1. 将插件文件夹 `astrbot_plugin_qq_group_sign` 放入 AstrBot 的 `data/plugins` 目录
2. 在 AstrBot WebUI 中启用插件
3. 根据需要配置插件参数

## ⚙️ 配置说明

插件支持以下配置选项：

- **打卡时间**：格式 `HH:MM:SS`，例如 `08:00:00`
- **时区设置**：东八区为 `8`
- **启用自动打卡**：是否开启自动定时打卡
- **白名单模式**：`true`=只打卡白名单群聊，`false`=打卡所有群聊
- **管理员通知**：打卡完成后是否通知管理员
- **管理群号**：接收打卡通知的管理群号
- **打卡消息**：打卡时发送的消息内容

## 🎮 使用命令

### 基础打卡命令
| 命令 | 别名 | 说明 | 示例 |
|------|------|------|------|
| `/打卡` | `/群打卡` | 在当前群聊执行打卡 | `/打卡` |
| `/全群打卡` | `/打卡所有群` | 对所有群聊执行打卡 | `/全群打卡` |
| `/打卡菜单` | - | 显示所有可用指令 | `/打卡菜单` |

### 白名单管理
| 命令 | 别名 | 说明 | 示例 |
|------|------|------|------|
| `/添加白名单` | `/加白名单` | 添加群号到白名单 | `/添加白名单 123456` |
| `/移除白名单` | `/删白名单` | 从白名单移除群号 | `/移除白名单 123456` |
| `/查看白名单` | `/白名单列表` | 查看白名单列表 | `/查看白名单` |

### 自动打卡控制
| 命令 | 别名 | 说明 | 示例 |
|------|------|------|------|
| `/开启自动打卡` | `/启动打卡` | 开启自动打卡 | `/开启自动打卡` |
| `/关闭自动打卡` | `/停止打卡` | 关闭自动打卡 | `/关闭自动打卡` |
| `/设置打卡时间` | `/打卡时间` | 设置打卡时间 | `/设置打卡时间 08:00:00` |
| `/切换模式` | `/打卡模式` | 切换白名单/全群模式 | `/切换模式` |

### 状态查询
| 命令 | 别名 | 说明 | 示例 |
|------|------|------|------|
| `/打卡状态` | `/打卡统计` | 查看打卡状态和统计 | `/打卡状态` |

## 📝 使用示例

### 1. 基础设置
```bash
# 查看所有可用指令
/打卡菜单

# 设置打卡时间为每天早上8点
/设置打卡时间 08:00:00

# 开启自动打卡
/开启自动打卡

# 切换到白名单模式
/切换模式
```

### 2. 白名单管理
```bash
# 添加群聊到白名单
/添加白名单 123456789
/添加白名单 987654321

# 查看当前白名单
/查看白名单

# 移除白名单中的群聊
/移除白名单 123456789
```

### 3. 手动打卡
```bash
# 在当前群聊执行打卡
/打卡

# 打卡所有群聊
/全群打卡

# 查看打卡统计
/打卡状态
```

## 🔧 工作模式

### 白名单模式
- 只对白名单中的群聊执行打卡
- 适用于需要选择性打卡的场景
- 使用 `/添加白名单` 和 `/移除白名单` 管理群聊

### 全群模式
- 对所有可访问的群聊执行打卡
- 适用于需要全面打卡的场景
- 注意：需要机器人有足够的群聊权限

## 📊 统计信息

插件会记录以下统计信息：
- 总打卡次数
- 成功打卡次数
- 失败打卡次数
- 上次打卡时间

## 🔔 管理员通知

打卡完成后，插件会向管理员发送通知，包含：
- 本次打卡的成功/失败统计
- 总体打卡情况
- 错误信息（如果有）

通知方式：
- 如果配置了管理群号，发送到指定群聊
- 否则通过日志记录

## ⚠️ 注意事项

1. **权限要求**：确保机器人有在目标群聊发送消息的权限
2. **时间格式**：打卡时间必须使用 `HH:MM:SS` 格式
3. **群号格式**：群号必须是字符串格式的数字
4. **配置保存**：修改配置后会自动保存到本地文件
5. **网络要求**：插件需要正常的网络连接来发送消息

## 🐛 故障排除

### 常见问题

**Q: 自动打卡不工作**
A: 检查是否已开启自动打卡，确认打卡时间设置正确

**Q: 找不到群聊**
A: 请使用白名单模式，手动添加需要打卡的群号

**Q: 打卡失败**
A: 检查机器人在目标群聊的权限，确认网络连接正常

**Q: 配置不生效**
A: 重启插件或检查配置文件权限

## 📄 许可证

本项目采用 GNU Affero General Public License v3.0 许可证。

## 👤 作者

**EraAsh** - 插件开发和维护

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个插件！

---

> 提示：使用前请确保已正确配置 AstrBot 和相关权限
